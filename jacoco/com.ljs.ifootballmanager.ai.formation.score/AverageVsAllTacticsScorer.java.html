<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>AverageVsAllTacticsScorer.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">esms-ai</a> &gt; <a href="index.source.html" class="el_package">com.ljs.ifootballmanager.ai.formation.score</a> &gt; <span class="el_source">AverageVsAllTacticsScorer.java</span></div><h1>AverageVsAllTacticsScorer.java</h1><pre class="source lang-java linenums">package com.ljs.ifootballmanager.ai.formation.score;

import com.google.common.collect.ImmutableList;
import com.ljs.ifootballmanager.ai.Tactic;
import com.ljs.ifootballmanager.ai.formation.Formation;
import com.ljs.ifootballmanager.ai.math.Maths;
import com.ljs.ifootballmanager.ai.rating.Rating;
import java.io.PrintWriter;

/**
 *
 * @author lstephen
 */
public final class AverageVsAllTacticsScorer implements FormationScorer {

<span class="nc" id="L16">    private static final AverageVsAllTacticsScorer INSTANCE</span>
        = new AverageVsAllTacticsScorer();

<span class="nc" id="L19">    private static final ImmutableList&lt;Tactic&gt; tactics = ImmutableList.copyOf(Tactic.values());</span>

<span class="nc" id="L21">    private AverageVsAllTacticsScorer() { }</span>

    public Double score(Formation f, Tactic tactic) {
<span class="nc" id="L24">        Double score = 0.0;</span>

<span class="nc bnc" id="L26" title="All 2 branches missed.">        for (Tactic t : tactics) {</span>
<span class="nc" id="L27">            score += VsTacticScorer.create(t).score(f, tactic);</span>
<span class="nc" id="L28">        }</span>

<span class="nc" id="L30">        return score / tactics.size();</span>
    }

    public Double scoring(Formation f, Tactic tactic) {
<span class="nc" id="L34">        Double score = 0.0;</span>

<span class="nc bnc" id="L36" title="All 2 branches missed.">        for (Tactic t : tactics) {</span>
<span class="nc" id="L37">            score += VsTacticScorer.create(t).scoring(f, tactic);</span>
<span class="nc" id="L38">        }</span>

<span class="nc" id="L40">        return score / tactics.size();</span>
    }

    public Double defending(Formation f, Tactic tactic) {
<span class="nc" id="L44">        Double score = 0.0;</span>

<span class="nc bnc" id="L46" title="All 2 branches missed.">        for (Tactic t : tactics) {</span>
<span class="nc" id="L47">            score += VsTacticScorer.create(t).defending(f, tactic);</span>
<span class="nc" id="L48">        }</span>

<span class="nc" id="L50">        return score / tactics.size();</span>
    }

    public Double shootingBonus(Formation f, Tactic tactic) {
<span class="nc" id="L54">        return DefaultScorer.get().shootingBonus(f, tactic);</span>
    }

    public Double gkBonus(Formation f, Tactic t) {
<span class="nc" id="L58">        return DefaultScorer.get().gkBonus(f , t);</span>
    }

    public Double shotQuality(Formation f, Tactic t) {
<span class="nc" id="L62">        return DefaultScorer.get().shotQuality(f, t);</span>
    }

    public Double gkQuality(Formation f) {
<span class="nc" id="L66">        return DefaultScorer.get().gkQuality(f);</span>
    }

    private Double skillRating(Formation f, Tactic tactic, Rating r) {
<span class="nc" id="L70">        Double score = 0.0;</span>

<span class="nc bnc" id="L72" title="All 2 branches missed.">        for (Tactic t : tactics) {</span>
<span class="nc" id="L73">            score += VsTacticScorer.create(t).skillRating(f, tactic, r);</span>
<span class="nc" id="L74">        }</span>

<span class="nc" id="L76">        return score / tactics.size();</span>
    }

    public void print(Formation f, PrintWriter w) {
<span class="nc" id="L80">        w.format(&quot;%10s &quot;, &quot;&quot;);</span>
<span class="nc bnc" id="L81" title="All 2 branches missed.">        for (Tactic t : tactics) {</span>
<span class="nc" id="L82">            w.format(&quot;%7s &quot;, t.getCode());</span>
<span class="nc" id="L83">        }</span>
<span class="nc" id="L84">        w.println();</span>

<span class="nc bnc" id="L86" title="All 2 branches missed.">        for (Rating rt : Rating.values()) {</span>
<span class="nc" id="L87">            w.format(&quot;%10s &quot;, rt);</span>
<span class="nc bnc" id="L88" title="All 2 branches missed.">            for (Tactic t : tactics) {</span>
<span class="nc" id="L89">                w.format(&quot;%7d &quot;, Maths.round(skillRating(f, t, rt)));</span>
<span class="nc" id="L90">            }</span>
<span class="nc" id="L91">            w.println();</span>
        }

<span class="nc" id="L94">        w.format(&quot;%10s &quot;, &quot;SH Qual&quot;);</span>
<span class="nc bnc" id="L95" title="All 2 branches missed.">        for (Tactic t : tactics) {</span>
<span class="nc" id="L96">            w.format(&quot;%7d &quot;, Maths.round(shotQuality(f, t)));</span>
<span class="nc" id="L97">        }</span>
<span class="nc" id="L98">        w.println();</span>

<span class="nc" id="L100">        w.format(&quot;%10s &quot;, &quot;SH Bonus&quot;);</span>
<span class="nc bnc" id="L101" title="All 2 branches missed.">        for (Tactic t : tactics) {</span>
<span class="nc" id="L102">            w.format(&quot;%7d &quot;, Maths.round(shootingBonus(f, t)));</span>
<span class="nc" id="L103">        }</span>
<span class="nc" id="L104">        w.println();</span>

<span class="nc" id="L106">        w.format(&quot;%10s &quot;, &quot;GK Qual&quot;);</span>
<span class="nc bnc" id="L107" title="All 2 branches missed.">        for (Tactic t : tactics) {</span>
<span class="nc" id="L108">            w.format(&quot;%7d &quot;, Maths.round(gkQuality(f)));</span>
<span class="nc" id="L109">        }</span>
<span class="nc" id="L110">        w.println();</span>

<span class="nc" id="L112">        w.format(&quot;%10s &quot;, &quot;GK Bonus&quot;);</span>
<span class="nc bnc" id="L113" title="All 2 branches missed.">        for (Tactic t : tactics) {</span>
<span class="nc" id="L114">            w.format(&quot;%7d &quot;, Maths.round(gkBonus(f, t)));</span>
<span class="nc" id="L115">        }</span>
<span class="nc" id="L116">        w.println();</span>

<span class="nc" id="L118">        w.format(&quot;%10s &quot;, &quot;Scoring&quot;);</span>
<span class="nc bnc" id="L119" title="All 2 branches missed.">        for (Tactic t : tactics) {</span>
<span class="nc" id="L120">            w.format(&quot;%7d &quot;, Maths.round(scoring(f, t)));</span>
<span class="nc" id="L121">        }</span>
<span class="nc" id="L122">        w.println();</span>

<span class="nc" id="L124">        w.format(&quot;%10s &quot;, &quot;Defending&quot;);</span>
<span class="nc bnc" id="L125" title="All 2 branches missed.">        for (Tactic t : tactics) {</span>
<span class="nc" id="L126">            w.format(&quot;%7d &quot;, Maths.round(defending(f, t)));</span>
<span class="nc" id="L127">        }</span>
<span class="nc" id="L128">        w.println();</span>

<span class="nc" id="L130">        w.format(&quot;%10s &quot;, &quot;Overall&quot;);</span>
<span class="nc bnc" id="L131" title="All 2 branches missed.">        for (Tactic t : tactics) {</span>
<span class="nc" id="L132">            w.format(&quot;%7d &quot;, Maths.round(score(f, t)));</span>
<span class="nc" id="L133">        }</span>
<span class="nc" id="L134">        w.println();</span>
<span class="nc" id="L135">    }</span>

    public static AverageVsAllTacticsScorer get() {
<span class="nc" id="L138">        return INSTANCE;</span>
    }


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.2.201409121644</span></div></body></html>